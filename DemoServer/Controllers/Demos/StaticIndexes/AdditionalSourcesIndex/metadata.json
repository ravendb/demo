{
    "Slug": "additional-sources-index",
    "SourceFileName": "AdditionalSourcesIndexController.cs",
    "Title": "Additional Sources Index",
    "DescriptionLines": [
        "Using the **Additional Sources** feature allows the index's Map & Reduce methods to reference code from external source files.",
        "",
        "With that, the index definition can be expanded to perform any complex indexing work required."
    ],

    "Assets": [
        {
            "Title": "Extending indexes - additional sources",
            "Type" : "link",
            "Url"  : "https://ravendb.net/docs/article-page/latest/csharp/indexes/extending-indexes"
        },
        {
            "Title": "Additional sources - Studio",
            "Type" : "link",
            "Url"  : "https://ravendb.net/docs/article-page/latest/csharp/studio/database/indexes/create-map-index#additional-sources"
        },
        {
            "Title": "Additional sources - Blog",
            "Type" : "link",
            "Url"  : "https://ayende.com/blog/192001-B/using-machine-learning-with-ravendb"
        }
    ],

    "Walkthroughs": [
        {
            "Title": "Define the Map index class",
            "Slug": "step-1",
            "DescriptionLines": [
                "* Create the Map index class - inherit from `AbstractIndexCreationTask`.",
                "",
                "* The generic params:<br>",
                "    * _Product_ - indicates that the source collection for the index will be the 'Products' collection<br>",
                "    * _Products_ByPrice.IndexEntry_ - is the shape of the resulting index entries<br> (see next step)"
            ],
            "Assets": [
                {
                    "Title": "Static Indexes Overview Demo",
                    "Type" : "demo",
                    "Url"  : "/static-indexes/static-indexes-overview"
                },
                {
                    "Title": "Map Indexes",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/docs/article-page/latest/csharp/indexes/map-indexes"
                },
                {
                    "Title": "Static Indexes",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/learn/inside-ravendb-book/reader/4.0/10-static-indexes-and-other-advanced-options#static-indexes-and-other-advanced-options"
                },
                {
                    "Title": "Working with Indexes",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/learn/inside-ravendb-book/reader/4.0/12-working-with-indexes#working-with-indexes"
                }
            ]
        },
        {
            "Title": "The Index Entry class",
            "Slug": "step-2",
            "DescriptionLines": [
                "* The IndexEntry class defines the _index-fields per entry_ in the index.<br>",
                "  These fields will be indexed and can be queried on.",
                "",
                "* The _content_ for each index-field is configured in the index constructor (see next step)."
            ],
            "Assets": [
                {
                    "Title": "Static Indexes Overview Demo",
                    "Type" : "demo",
                    "Url"  : "/static-indexes/static-indexes-overview"
                },
                {
                    "Title": "Map Indexes",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/docs/article-page/latest/csharp/indexes/map-indexes"
                },
                {
                    "Title": "Static Indexes",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/learn/inside-ravendb-book/reader/4.0/10-static-indexes-and-other-advanced-options#static-indexes-and-other-advanced-options"
                },
                {
                    "Title": "Working with Indexes",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/learn/inside-ravendb-book/reader/4.0/12-working-with-indexes#working-with-indexes"
                }
            ]
        },
        {
            "Title": "Define the Map",
            "Slug": "step-3",
            "DescriptionLines": [
                "* The _Map_ function defines the index-fields content.",
                "",
                "* Fields with content taken from Product document:",
                "    * ProductName",
                "    * Origin",
                "",
                "* Fields with content taken from an Additional Source:",
                "    * SalePrice",
                "    * ProfitPrice",
                "",
                "    ==> Methods `CalcSalePrice` & `CalcProfitPrice` are located in an external file.<br>",
                "        (File is added in the next step)."
            ],
            "Assets": [
                {
                    "Title": "Extending indexes - additional sources",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/docs/article-page/latest/csharp/indexes/extending-indexes"
                },
                {
                    "Title": "Additional sources - Studio",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/docs/article-page/latest/csharp/studio/database/indexes/create-map-index#additional-sources"
                },
                {
                    "Title": "Additional sources - Blog",
                    "Type" : "link",
                    "Url"  : "https://ayende.com/blog/192001-B/using-machine-learning-with-ravendb"
                }
            ]
        },
        {
            "Title": "Set Additional Sources",
            "Slug" : "step-4",
            "DescriptionLines": [
                "* Set `AdditionalSources`. It is a dictionary that holds:<br>",
                "  <any reference name, the additional source string>",
                "",
                "    * _DiscountLogic_ is just a descriptive name for the added source",
                "    * _File.ReadAllText_ will get the string representation from the additional source file.",
                "",
                "* At indexing time the content for fields SalePrice & ProfitPrice will be computed from the relevant methods in MyAdditionalSourceFile."
            ],
            "Assets": [
                {
                    "Title": "Extending indexes - additional sources",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/docs/article-page/latest/csharp/indexes/extending-indexes"
                },
                {
                    "Title": "Additional sources - Studio",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/docs/article-page/latest/csharp/studio/database/indexes/create-map-index#additional-sources"
                },
                {
                    "Title": "Additional sources - Blog",
                    "Type" : "link",
                    "Url"  : "https://ayende.com/blog/192001-B/using-machine-learning-with-ravendb"
                }
            ]
        },
        {
            "Title": "Query for documents",
            "Slug" : "step-5",
            "DescriptionLines": [
                "* Query the 'Products' collection using the defined index.",
                "",
                "* _RavenDB will search the index_ for the indexed terms that match the query criteria",
                "  and retrieve the matching documents from the documents store.",
                "",
                "* The query results will include all documents from the 'Products' collection whose their calculated SalePrice is less than price.",
                "",
                "* The additional source code used is visible in the _Additional Sources Tab_ in the Edit Index view in the Studio."
            ],
            "Assets": [
                {
                    "Title": "Map Indexes",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/docs/article-page/latest/csharp/indexes/map-indexes"
                },
                {
                    "Title": "Static Indexes",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/learn/inside-ravendb-book/reader/4.0/10-static-indexes-and-other-advanced-options#static-indexes-and-other-advanced-options"
                },
                {
                    "Title": "Working with Indexes",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/learn/inside-ravendb-book/reader/4.0/12-working-with-indexes#working-with-indexes"
                },
                {
                    "Title": "Querying an index",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/docs/article-page/latest/csharp/indexes/querying/basics#example-iv---querying-a-specified-index"
                }
            ]
        }
    ]
}
